'' =================================================================================================
''
''   File....... SD_RT_format_card.spin2
''   Purpose.... Simple format utility runner for SD cards
''   Author..... Stephen M Moraco
''   Started.... JAN 2026
''
'' =================================================================================================

CON

    _CLKFREQ        = 320_000_000

    ' Pin configuration for P2 Edge with SD card
    SD_CS   = 60
    SD_MOSI = 59
    SD_MISO = 58
    SD_SCK  = 61

OBJ
    fmt : "SD_format_utility_v2"

PUB go() | result

    debug(" ")
    debug("======================================================")
    debug("  SD Card Format Utility")
    debug("======================================================")
    debug(" ")
    debug("WARNING: This will ERASE ALL DATA on the card!")
    debug(" ")

    debug("Formatting card with label 'P2-BENCH'...")
    result := fmt.formatWithLabel(SD_CS, SD_MOSI, SD_MISO, SD_SCK, @label)

    if result
        debug(" ")
        debug("FORMAT SUCCESSFUL!")
    else
        debug(" ")
        debug("FORMAT FAILED!")

    debug(" ")
    debug("END_SESSION")

DAT

label   BYTE    "P2-BENCH", 0
