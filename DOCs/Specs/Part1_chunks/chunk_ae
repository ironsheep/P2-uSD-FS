
0

1

0

Unlocked

Don’t care Exist

Clear FEP and the card is still unlocked(5)

0

0

1

0

0

0

1

Locked

Exist

1

1

0

0

0

1

Unlocked

Don’t care Don’t care Set/Replace FEP and the card is still unlocked 0

0
0

1

1

1

1

1

Unlocked

Don’t care Cleared

Enable Ver.2.0 function set

0

0

1

1

1

1

1

Locked

Exist

Cleared

Enable Ver.2.0 function set

1

0

Exist

Don’t care Set/Replace FEP and card is still locked

1

1

1

1

1

Locked(1)

Cleared

Exist

(COP unlock)Enable other CMD42 functions
1 to 0 0
card is unlocked (1)(3)

1

1

1

1

1

Locked(1)

Exist

Exist

(COP unlock)Enable other CMD42 functions
1
card is PWD locked (1)(3)(4)

0

1

1

1

1

1

Locked(2)

Exist

Exist

Card is still locked

1

1

1

1

1

1

1

Unlocked

Don’t care Exist

0

1

(2)(4)

Card is still unlocked

Table 4.3.7-2 : COP Specific Function for COP Card
Notes:
(1) – 1st time after Power On Reset or Reset
(2) – 2nd time or more after Power On Reset or Reset
(3) – “COP Unlock” – CMD42[1Fh] with no FEP is required to access any other CMD42 commands after power
on reset or reset, when FEP=set
(4) – If PWD is set, Unlock with PWD - CMD42[00h] is required to unlock the card after “Unlock COP”
(5) – Disabled as long as FEP=0
6 – Commands not covered by Table 4.3.7-1 and Table 4.3.7-2 shall return LOCK_UNLOCK_ERROR

with no change to card state.
Application Note:
To replace password, the host should consider following cases. When FEP_LEN and password data exist,
the card assumes old and new passwords are set in the data structure. When FEP_LEN and FEP are
cleared, the card assumes only new password is set in the data structure.

70

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.7.3 Forcing Erase
4.3.7.3.1 Force Erase
In the case that the user forgot the password (the PWD content) it is possible to erase all the card data
content along with the PWD content. This operation is called Force Erase. Note that since the password
lock is effective only to User Area, data contents stored in other than User Area are not erased by Force
Erase. In addition, Force Erase also works for TCG enabled card when it is locked by the password. Note
that TCG MBR Table is not erased by the Force Erase.
 Select a card (CMD7), if not previously selected already.
 Define the block length (CMD16) to 1 byte (8-bit card lock/unlock command). Send the card
lock/unlock command with the appropriate data block of one byte on the data line including the 16
bit CRC. The data block shall indicate the mode ERASE (the ERASE bit shall be the only bit set).
 If the ERASE bit is not the only bit set in the data field, the LOCK_UNLOCK_FAILED error bit will be
set in the status register and the erase request is rejected. If the command was accepted, then ALL
THE CARD CONTENT WILL BE ERASED including the PWD and PWD_LEN register content and
the locked card will be unlocked.
 An attempt to force erase on an unlocked card will fail and LOCK_UNLOCK_FAILED error bit will be
set in the status register.
 [If FEP=set, execution of this function is prevented, PWD and PWD_LEN registers are not cleared,
and the LOCK_UNLOCK_FAILED error bit shall be set in the status register.]
4.3.7.3.2 FEP Force Erase
In the case that FEP is set, it is possible to erase all the card data content along with the PWD content
only if FEP in known. This operation is called FEP Force Erase.
 Unlock COP function set, if not unlocked already.
 Define the block length (CMD16), given by the 8-bit card lock/unlock mode, the 8-bit password size
(in bytes), and the number of bytes of the currently used password FEP.
 Send the card lock/unlock command with the appropriate data block size on the data line including
the 16-bit CRC. The data block shall indicate the mode ERASE together with COP, the length
(PWDS_LEN) and the FEP itself. The rest of the bits shall be set to zero.
 If the ERASE and COP bits are not the only bits set in the data field, the LOCK_UNLOCK_FAILED
error bit shall be set in the status register and the erase request is rejected.
 FEP force erase is performed only if password provided matches FEP register. If password is not
provided, or incorrect, LOCK_UNLOCK_FAILED error bit shall be set in the status register and the
erase request is rejected.
 An attempt to FEP force erase on an unlocked card shall fail and LOCK_UNLOCK_FAILED error bit
shall be set in the status register.
 If the command was accepted, then ALL THE CARD CONTENT SHALL BE ERASED including the
PWD and PWD_LEN register content and the locked card shall be unlocked.
 Even FEP force erase is executed, FEP and FEP_LEN register content shall remain unchanged.
Note that COP and TCG are exclusive. That is, Force Erase Password cannot be set to TCG enabled
card, and TCG cannot be enabled when FEP=set.

71

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
4.3.7.3.3 Force Erase Function to the Locked Card
Table 4-8 clarifies the relation between force erase and Write Protection. The force erase does not erase
the secure area. The card shall keep its locked state during the erase execution and change to the
unlocked state after the erase of all user area is completed. Similarly, the card shall keep Temporary Write
Protect, Write Protect Until Power Cycle and Group Write Protection during the erase execution and clear
Write Protection after the erase of all user area is completed. In the case of an erase error occurs, the
card can continue force erase if the data of error sectors are destroyed.
Write Protections
PWP: Permanent Write Protect (CSD Bit13)
TWP: Temporary Write Protect (CSD Bit12)
WP_UPC: Write Protect Until Power Cycle (CSD Bit9)
GWP: Group Write Protect (CMD28, CMD29, CMD30)

CMD42 Parameter PWP
Bit3 Bit2 Bit1 Bit0

TWP
WP_UPC
GWP

Result of the Function

Card Status
Bit25

1

0

0

0

Yes

don't care Error (Note *2 Refer to Table 4-10)

1

0

0

0

No

Yes

1

0

0

0

No

No

1

Execute force erase and clear Temporary Write 1 to 0
Protect, Write Protect Until Power Cycle and Group
Write Protect. (Note *3 Refer to Table 4-10)
Execute force erase.
1 to 0

Bit24
1
0
0

Table 4-8 : Force Erase Function to the Locked Card (Relation to the Write Protects)
4.3.7.4 Relation Between ACMD6 and Lock/Unlock State
ACMD6 is rejected when the card is locked and bus width can be changed only when the card is unlocked.
Table 4-9 shows the relation between ACMD6 and the Lock/Unlock state.
Card State
Unlocked
Locked
Unlocked
Locked

Bus Mode Result of the Function
1-bit mode
1-bit mode
4-bit mode
4-bit mode

ACMD6 is accepted
ACMD6 is rejected and still in 1-bit mode
ACMD6 is accepted
ACMD6 is rejected and still in 4-bit mode. CMD0 change to 1-bit mode

Table 4-9 : Relation between ACMD6 and the Lock/Unlock State
Application Note:
After power on or reset (in 1-bit mode), if the card is locked, the SD mode host shall issue CMD42
in 1-bit mode. If the card is locked in 4-bit mode, the SD mode host shall issue CMD42 in 4-bit mode.

72

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.7.5 Commands Accepted for Locked Card
4.3.7.5.1 Details of Card Command Operation
Table 4.3.7-4 describes card command operations depending on target and lock status.
User Area Partition1, Protected Area
Unlocked
Locked

Target
Lock status
CMD17, 18

Accepted

CMD19, 22

Accepted
if supported

CMD23

Accepted
if supported

Treated as an illegal
command
Treated as an illegal
command
Accepted if card
supports
ACMD53/54

Boot Partition
RPMB Unit
Unlocked/Locked Unlocked/Locked
Accepted

N/A

Accepted
if supported

N/A

Accepted
if supported

Accepted

N/A

N/A

CMD24, 25
Erase class (5)

Accepted2

Treated as an illegal
command

[RPMB disabled or
after RPMB auth.]
Accepted
[Otherwise]
Treated as an
illegal command

Write
protection class
(6)

[SDSC]
Accepted if
supported
[Otherwise]
Treated as an
illegal command

Treated as an illegal
command

Treated as an
illegal command

Note 1) User Area and TCG MBR Table
2) TCG MBR Table content modification shall be done using TCG commands following TCG Storage
Architecture Core Specification

Table 4.3.7-4 : Card Command Operations Depending on Target and Lock Status
Table 4.3.7-5 describes other card command operations according to lock status.
Lock status
Basic class (0)
Lock card class (7)
CMD16
ACMD41, 42
CMD39

Unlocked

Locked

Accepted

Accepted

Accepted if supported

CMD48, 49, 58, 59

Accepted if supported

Accepted if supported
Accepted under designated
conditions (see Section 4.3.7.5.2)
Accepted if supported
Treated as an illegal command

ACMD53, 54
Accepted if supported
Other commands
Accepted if supported
Table 4.3.7-5 : Other Card Command Operations According to Lock Status

When locked card accepts commands, it shall return response with setting CARD_IS_LOCKED.
4.3.7.5.2 Specific Rules for Extension Commands
As described in Section 4.3.7.5.1, card lock mechanism does not affect access to Boot Partitions and
RPMB Unit. For these partitions and unit, associated parameters are defined in the Security and Boot
73

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
Register Set of Extension Register as described in Table 5-32.
SD card compliant to Physical Layer Specification Version 8.00 rejects extension commands (CMD48,
49, 58 and 59) when it is locked. However, parameters related to Boot or RPMB should be accessible
even card is locked. Thus, the following rules depending on the support of Security and Boot Function
(SBF, refer to Section 5.8.3) are introduced when locked card receives extension commands.
Case 1: Card does not support SBF
In this case, card always rejects these extension commands as defined in Physical Layer Specification
Version 8.00.
Case 2: Card supports SBF
In this case, card operation varies according to FNO in the extension commands.
Case 2-a) FNO in the extension command corresponds to SBF
Card accepts the command and works as specified by it even card is locked (see Figure 4.3.7-5). Note
that R1 response shall indicate CAR_IS_LOCKED in this case.
CARD_IS_LOCKED=1

CMD48
for SBF

CMD

CMD48

R1

CMD49
for SBF

CMD49

CARD_IS_LOCKED=1

R1
SBF works

DAT

Data

Data

Figure 4.3.7-5 : Locked Card Operation When Supporting SBF (Command Relating to SBF)
Case 2-b) FNO in the extension command does not correspond to SBF
Card accepts the command, but the extension functions do not work. In this case, card does not transmit
when it receives CMD48 or CMD58, or keeps busy state more than 1 second after it receives data
followed by CMD49 or CMD59. In this time, card indicates OUT_OF_RANGE and CARD_IS_LOCKED in
the response of the next command. See Figure 4.3.7-6 for more details.

74

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
≥ 1sec
CMD48
not for SBF

CMD48

CMD

OUT_OF_RANGE=1
CARD_IS_LOCKED=1

CARD_IS_LOCKED=1

R1

CMD13

R1

Extension
functions do
not work

(No data)

DAT
When card receives CMD48 or CMD58 not
related to SBF, Card will not transmit data.

≥ 1sec
CMD49
not for SBF

CMD

OUT_OF_RANGE=1
CARD_IS_LOCKED=1

CARD_IS_LOCKED=1

CMD49

R1

DAT

CMD13

R1

Extension
functions do
not work

Busy

Data

When card receives CMD49 or CMD58 not
related to SBF, it responds R1 but keeps busy
more than 1 sec after receiving data.

Figure 4.3.7-6 : Locked Card Operation When Supporting SBF (Command Not Relating to SBF)

75

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.7.6 Three Types of Lock/Unlock Card
There are three types of lock/unlock function-supported cards. The Type 1 is the earlier version of SD
Memory Card and the Type 2 is defined in the Physical Layer Specification Version 1.10 and higher. The
Type 3 (COP Card) is defined in Physical Layer Specification Version 5.10 and higher. Table 4-10 shows
the difference between these types of cards. The SD memory cards that support Lock/Unlock and comply
with Version 1.01, can take either Type 1 or Type 2. The SD Memory Cards that support Lock/Unlock and
comply with Version 1.10 and higher, shall take Type 2. The SD Memory Cards that support Lock/Unlock
and comply with Version 5.10 and higher, shall take Type 2 or Type 3.
Notes
*1 in Table 4-7,
Table 4.3.7-1
and Table
4.3.7-2
*2 in Table 4-8

*3 in Table 4-8

*4 in Table 4-7,
Table 4.3.7-1
and Table
4.3.7-2

Type 1 Card (Earlier Version)
Treat CMD42 Parameter=0011b as 0001b.
Treat CMD42 Parameter=0111b as 0101b.
Treat CMD42 Parameter=0110b as 0010b.
Results of other combinations are Error.
Execute force erase and set Permanent
Write Protect. If force erase is completed,
the CARD_IS_LOCKED is changed from 1
to 0. A priority is given to force erase from
Permanent Write Protect.
Execute force erase but Temporary Write
Protect and Group Write Protect are not
cleared. It should be cleared by the host.

Type 2,3 Card (New Version)
All results are Error

The result is Error
A priority is given to Permanent Write
Protect from force erase.

Execute force erase and clear
Temporary Write Protect, Write Protect
Until Power Cycle(1) and Group Write
Protect.
CMD42 Parameter=0010 and CMD42 The result is Error. Card status Bit24
Parameter=0110 The result is no error. Card will be 1
status Bit24 will be 0

Note (1): Write Protect Until Power Cycle is applicable for Physical Layer Specification Version 9.00 or later.

Table 4-10 : Version Difference of Lock/Unlock Functions
Function
COP Unlock
Set FEP
Clear FEP
PWD
clear
FEP=set
Force Erase
FEP=set

Non-COP Card
The result is Error. Card status
Bit24 is 1
PWD is set
PWD_LEN and PWD is cleared
if PWD_LEN and PWD is cleared

COP Card
CMD42 ver.2.0 mode is enabled according
to Table 4.3.7-2
FEP is set
FEP_LEN and FEP is cleared
The result is Error. Card status Bit24 is 1

if PWD_LEN and PWD is cleared. The result is Error. Card status Bit24 is 1
Card content is erased
Table 4.3.7-3 : Type 3 Lock/Unlock Functions Difference

Application Note:
The host can use both types of cards without checking the difference by taking account of the following
points.
(1) The host should not set the parameters of CMD42 that return an error listed in Table 4.3.7-1 and
Table 4.3.7-2. (For *1)
(2) The host should not issue a force erase command if the Permanent Write Protect is set to 1, otherwise
the Type 1 card can no longer be used even if the user remembers the password. (For *2)
(3) After the force erase, if the Temporary Write Protect is not cleared, the host should clear it. (For *3)
(4) The host should not set FEP on COP Card locked with unknown PWD.

76

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.8 Content Protection
This section is a blank in the Simplified Specification.

4.3.9 Application-Specific Commands
4.3.9.1 Application-Specific Command – APP_CMD (CMD55)
This command, when received by the card, causes the card to interpret the following command as an
application-specific command, ACMD. The ACMD provides command extension, has the same structure
as that of regular commands and it may have the same CMD number. The card recognizes it as ACMD
by the fact that it appears after APP_CMD.
When an ACMD is not defined, the card treats it as regular command. If, as an example, a card has a
definition for ACMD13 but not for ACMD7, then, command 13 after APP_CMD is interpreted as the nonregular CMD13 but command 7 after APP_CMD is interpreted as the regular CMD7. In order to use one
of the ACMD's, the host should be:
(1) When sending APP_CMD, the response has the APP_CMD bit set signaling to the host that ACMD
is now expected.
(2) ACMD55 does not exist. If multiple CMD55 are issued continuously, APP_CMD bit in each response
is set to 1. The command issued immediately after the last CMD55 shall be interpreted as ACMD.
When more than one command (except CMD55) is issued directly after CMD55, the first command
is interpreted as ACMD and the following commands are interpreted as regular commands
(3) If a defined ACMD is send and it is legal, the response has the APP_CMD bit set, indicating that the
accepted command is interpreted as ACMD.
(4) If an undefined ACMD is sent and it is legal, the response has the APP_CMD bit cleared, indicating
that the accepted command is interpreted as normal CMD.
(5) If a defined or undefined ACMD is sent and it is illegal, then it is handled as an illegal command.
Illegal Command Error is indicated in the next R1/R6 response and host should ignore APP_CMD
status in the response. Next command is handled as normal command.
Host shall not use undefined ACMDs as regular commands even if the specification defines it.
The following ACMD numbers are reserved for the SD Memory Card proprietary applications and shall
not be used by any SD Memory Card manufacturer:
ACMD6, ACMD13, ACMD17-26, ACMD38-49, ACMD51.
In above explanation, commands defined in the detailed command description section are "defined"
commands but not defined in the section are "Undefined" commands (Section 4.7.4 or Section 7.3.1.3
depends on bus mode). "Legal" means that a defined or undefined command is accepted at the current
state and "Illegal" means that a defined or undefined command is not accepted at the current state.

Exception in ACMD41
 The response of ACMD41 does not have APP_CMD status. Sending the response of CMD41 in idle
state means the card is accepted as legal ACMD41.
 As APP_CMD status is defined as "clear by read", APP_CMD status, which is set by ACMD41, may
be indicated in the response of next CMD11 or CMD3. However, as ACMD11 and ACMD3 are not
defined, it is not necessary to set APP_CMD status.
 Host should ignore APP_CMD status in the response of CMD11 and CMD3.

4.3.9.2 General Command - GEN_CMD (CMD56)
This section is a blank in the Simplified Specification.

77

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.10 Switch Function Command
4.3.10.1 General
Switch function command (CMD6) is used to switch or expand memory card functions. Currently four
function groups are defined:
(1) Access Mode:
Selection of SD bus interface speed modes.
(2) Command System:
A specific function can be extended and controlled by a set of shared commands.
(3) Driver Strength
Selection of suitable output driver strength in UHS-I modes depends on host environment.
(4) Power Limit
Selection to limit the maximum power depends on host power supply capability and heat release
capability. Current Limit is re-defined as Power Limit to account for the two power supply
voltages on UHS II cards.
This was introduced in the Physical Layer Specification Version 1.10. Therefore, cards that are compatible
with earlier versions of the spec do not support it. The host should check the "SD_SPEC" field in the SCR
register to identify what version of the spec the card complies with before using CMD6. It is also possible
to check support of CMD6 by bit10 of CCC in CSD. It is mandatory for an SD memory card of Version
1.10 and higher to support CMD6.
CMD6 is valid under the "Transfer State". Once selected, via the switch command, all functions only return
to the default function after a power cycle, CMD6 (Mode 1 operation with Function 0 in each function
group) or CMD0. Executing a power cycle or issuing CMD0 will cause the card to reset to the "idle" state
and all the functions to switch back to the default function.
As a response to CMD6, the SD Memory Card will send R1 response on the CMD line and 512 bits of
status on the DAT lines. From the SD bus transaction point of view, this is a standard single block read
transaction and the time out value of this command is 100 ms, the same as in read command. If CRC
error occurs on the status data, the host should issue a power cycle.
CMD6 function switching period is within 8 clocks after the end bit of status data. When CMD6 changes
the bus behavior (i.e. access mode), the host is allowed to use the new functions (increase/decrease CLK
frequency beyond the current max CLK frequency), at least 8 clocks after at the end of the switch
command transaction (see Figure 4-14).
In response to CMD0, the switching period is within 8 clocks after the end bit of CMD0. When CMD6 has
changed the bus behavior (i.e. access mode) the host is allowed to start the initialization process, at least
8 clocks after at the CMD0.

78

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

Check function
CMD

(Mode=0)

CMD6

DAT

Card internal
execution

Switch function
CMD

DAT

Res

Status Data

Function change timing: within 8
clocks

(Mode=1)

CMD6

Res

Card internal
execution

Status Data

Current function

Switched function

Figure 4-14 : Use of Switch Command
CMD6 supports six function groups, and each function group supports sixteen branches (functions). Only
one function can be chosen and active in a given function group. Function 0 in each function group is the
default function (compatible with Spec. 1.01).
CMD6 can be used in two modes:
 Mode 0 (Check function) is used to query if the card supports a specific function or functions.
 Mode 1 (set function) is used to switch the functionality of the card.

79

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.10.2 Mode 0 Operation - Check Function
CMD6 mode 0 is used to query which functions the card supports, and to identify the maximum
current/power consumption of the card under the selected functions.
Refer to Table 4-32: Switch function commands (class 10) for the argument definition of CMD6.
A query is done by setting the argument field of the command, as follows:
 Set the Mode bit to 0
 Select only one function in each function group. Selection of default function is done by setting the
function to 0x0. Select a specific function by using appropriate values from Table 4-11. Selecting 0xF
will keep the current function that has been selected for the function group.
 When the function in query is ready, the card returns the inquired function number, if busy, the card
returns the current function number (See Table 4-15).
In response to a query, the switch function will return the following 3 statuses (see Table 4-13):
 The functions that are supported by each of the function groups
 The function that the card will switch to in each of the function groups. This value is identical to the
provided argument if the host made a valid selection or 0xF if the selected function was invalid.
 Maximum current/power consumption under the selected functions. If one of the selected functions
was wrong, the return value will be 0.

4.3.10.3 Mode 1 Operation - Set Function
CMD6 mode 1 is used to switch the functionality of the card.
Switching to a new functionality is done by:
 Setting the Mode bit to 1
 Selecting only one function in each function group. Selection of default function is done by setting
the function to 0x0. It is recommended to specify 0xF (no influence) for all selected functions, except
for functions that need to be changed. Selecting 0xF will keep the current function for the function
group.
 When a function cannot be switched because it is busy, the card returns the current function number
(not returns 0xF), the other functions in the other groups may still be switched.
In response to a set function, the switch function will return the following 3 statuses:
 The functions that are supported by each of the function groups
 The function that is the result of the switch command. In case of invalid selection of one function or
more, all set values are ignored and no change will be done (identical to the case where the host
selects 0xF for all functions groups). The response to an invalid selection of function will be 0xF.
 Maximum current/power consumption under the selected functions. If one of the selected functions
was wrong, the return value will be 0.

80

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
Arg. Slice
Group No.

[23:20]
6

[19:16]
5

Function name

reserved

reserved

0x0

Default*2

[15:12]
4
Power
Limit*3

[11:8]
3
Driver
Strength

[7:4]
2
Command
system

[3:0]
1
Access
mode*1

Default*2
0.72W

Default*2
Type B

Default*2

Default*2
/ SDR12
High-Speed
/ SDR25
SDR50
SDR104
DDR50

0x1

Reserved

Reserved

1.44W

Type A

For eC

0x2
0x3
0x4

Reserved
Reserved
Reserved

Reserved
Reserved
Reserved

2.16W
2.88W
1.80W

Type C
Type D
Reserved

Reserved
OTP
ASSD

0x5
0x6
0x7
0x8
0x9
0xA
0xB
0xC
0xD
0xE

Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved

Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved

Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved

Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved

Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
(eSD)
Reserved
Vendor
specific

Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved
Reserved

0xF
No influence
Note1: Bus Speed Mode is alias of Access Mode.
Note2: "Default" of Function 0 means that a function of just after the card initialized.
Note3: Notes for Power Limit
(1) Function 2 and 3 may be used only for embedded devices.
(2) Allowed power consumption for removable cards shall be up to 1.80W, even though the Power
Limit is set to 2.16W or 2.88W .

Table 4-11 : Available Functions of CMD6
Function Group 1 is defined as Bus Speed Mode switch. If the card is initialized in 3.3V signal level,
Default Speed and High Speed are assigned to function 0 and 1. Then support bits of function 2 to 4
(SDR50, SDR104 and DDR50) are set to 0. If the card is initialized in 1.8V signal level, SDR and DDR
modes are assigned from function 0 to function 4.
Function Group 2 is defined for Command System extension. CMD34-37, CMD50 and CMD57 are
reserved for SD command system. OTP and ASSD are added. Refer to Part A1 Advanced Security
Extension (McEX), Part 1 OTP Addendum and Part A3 ASSD Core Specification for more detail.
Function Group 3 is defined as driver strength selection for UHS-I modes. This switch is effective in 1.8V
signaling mode. Refer to Section 6.7.1 for more detail.
Function Group 4 is defined as Power Limit switch for total card power consumable. This field is set
according to host power supply capability.

81

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
For SDIO Combo Cards, refer to SDIO specification to set the total card power consumable.
The Power Limit is defined in accordance with the Mechanical Addenda that define thermal requirements
as a function of total card power consumption.
This Function Group is used for any bus mode including UHS-I and UHS-II modes. The default value
of the Power Limit is 0.72W (minimum setting). In Legacy SD and UHS-I cards that have only VDD1
and not VDD2, this translates to 200mA at 3.6V.
In UHS-I mode, after selecting one of SDR50, SDR104 or DDR50 mode by Function Group 1, host
needs to change the Power Limit to enable the card to operate in higher performance. In UHS-II
mode, the host needs to change the Power Limit after finishing initialization to enable the card to
operate in higher performance. Total card power is the sum of VDD1 and VDD2 power consumption.
In the other cases which may consume power by some function operations, such functions should
have a function enable method (it will be defined in each Function Specification). After setting Power
Limit, functions should be enabled by the function initialization. In case a function is not provided with
enough power, it will fail initialization and the function is disabled by the card. If a function does not
have a function enable method, the function shall work in 0.72W.
Power restriction described in Table 3-6, Table 3-9 and Section 6.6.3 are the case of all functions are
disabled.
Function 0-F
F0
F1
F2
F3
F4
F5-FE
FF
Non UHS Mode
1
X
X
X
X
0 ..... 0
1
UHS Mode
1
1
1
1
1
0 ..... 0
1
Note 1: Same values are assigned to all X's: either 0 or 1.
Note 2: For Card compliant to Ver3.0x, all X are equal to 0 in Non UHS Mode and
the support bit for F4 is set to 0 in UHS Mode.
For example, in UHS-I card, when the maximum power of a card is 1.08W (300mA at 3.6V on VDD1), the
card operates at up to 0.72W (200mA at 3.6V on VDD1) when the Current Limit is set to 0.72W and up
to 1.08W when Power Limit is set to 1.44W, 1.80W (and when Function 3 is selected).
Function Group 4
Power Limit
Function 0
Function 1
Function 2
Function 3
Function 4

Max. Allowed Power
(VDD1 and VDD2)
0.72W
1.44W
2.16W
2.88W
1.80W

Max. Current of
VDD1
200mA
400mA
600mA
800mA
400mA

Max. Current of
VDD2
200mA
200mA
Note 6
Note 6
200mA

Note 1: Max. Allowed Power is defined as total of VDD1 and VDD2 power per card at the maximum
voltage: 3.6V for VDD1 and 1.95V for VDD2.
Note 2: UHS-I Card is up to 1.44W even if one of Function 2, 3 or 4 is selected. 1.80W is defined for
UHS-II mode.
Note 3: Function 2 and 3 cannot be used in UHS-II mode.
Note 4: UHS Host should support power supply capability of 400mA for VDD1 and 200mA for VDD2.
VDD1 only Host should set to Function 0 or 1.
Note 5: Host needs to support VDD2 to use UHS-II or NFC supported cards.
Note 6: Max. Current of VDD2 for embedded device will be provided by device vendor.

Table 4-12 : Power Limit and Current Limit of VDD1 and VDD2

82

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

Application Notes:
Default setting is 0.72W. In this mode, UHS-I and UHS-II card may not provide the maximum
performance. The Speed Grade performance is defined at 1.44W mode. The maximum
performance of the card is available when setting of this field covers the maximum current (power)
of the card that can be read by CMD6 mode 0.
Host determines setting of this field by the host power supply capability to the card, heat release
capability of host and the maximum current of a connector. Refer to Mechanical Addenda for more
details.
The followings are requirements in UHS-II mode,
(1) Function Group 1 and 3 are not used.
(2) Support of Function Group 2 is optional.
(3) Support of Function Group 4 is mandatory.

83

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.10.4 Switch Function Status
The switch function status is the returned data block that contains function and current consumption
information. The block length is predefined to 512 bits and the use of SET_BLK_LEN command is not
necessary. Table 4-13 describes the status data structure.
The status bits of the response contain the information of the function group. Maximum current
consumption will be used only for the new function added through this command. In this case,
VDD_R_CURR_MIN, VDD_W_CURR_MIN, VDD_R_CURR_MAX and VDD_W_CURR_MAX values in
the CSD register provides the current consumption when all card functions are set to the default state
and can be used by spec 1.01 compatible hosts.
Bits
Description
Width
511:496 Maximum Current/Power Consumption
This field indicates total current/power consumption of the card including
enabled functions selected by the Function Selection ([399:376] bits) dependent
on selected Bus Speed Mode.
The host should check the maximum current consumption by mode 0 operation
and verify that it can supply the necessary current/power before executing
mode 1 operation.
Especially in UHS-I or UHS-II mode, this field is related to Current Limit / Power
Limit setting. CMD6 mode 0 indicates the maximum current/power of a selected
bus speed mode regardless of the setting of Current Limit / Power Limit. CMD6
mode 1 indicates the maximum current/power of a selected bus speed mode
depending on the setting of Current Limit.
Definition for SD I/F Mode
Value
Maximum Current(Power) Consumption at 3.6V
0
Error
1
1mA (3.6mW)
2
2mA (7.2mW)
3
3mA (10.8mW)
......
......
65,535
65,535mA (235926mW)
The voltage to calculate current consumption is defined at 3.6V.
Maximum current consumption is average over 1second.
Definition for UHS-II Mode
For UHS-II Card, this field is defined as Maximum Power Consumption. Total
maximum power consumption of VDD1 and VDD2 is indicated. The definition of
Power Consumption in this field is equivalent to Current Consumption at 3.6V.
Refer to Current Limit / Power Limit in Section 4.3.10.3 about the relation
between power and current of VDD1 and VDD2.
Value
0
1
2
3
......
65,535

Maximum Power Consumption
Error
3.6mW (= 1mA x 3.6V)
7.2mW (= 2mA x 3.6V)
10.8mW (= 3mA x 3.6V)
......
235926mW

84

16

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
Bits
Description
Width
495:480 Support Bits of Functions in Function Group 6
Each bit corresponds to a function. Function 15 and 0 are always enabled.
16
If a bit 480+i is set, function i is supported (i = Function 15 to 0)
479:464 Support Bits of Functions in Function Group 5
Each bit corresponds to a function. Function 15 and 0 are always enabled.
16
If a bit 464+i is set, function i is supported (i = Function 15 to 0)
463:448 Support Bits of Functions in Function Group 4
Each bit corresponds to a function. Function 15 and 0 are always enabled.
16
If a bit 448+i is set, function i is supported (i = Function 15 to 0)
447:432 Support Bits of Functions in Function Group 3
Each bit corresponds to a function. Function 15 and 0 are always enabled.
16
If a bit 432+i is set, function i is supported (i = Function 15 to 0)
431:416 Support Bits of Functions in Function Group 2
Each bit corresponds to a function. Function 15 and 0 are always enabled.
16
If a bit 416+i is set, function i is supported (i = Function 15 to 0)
415:400 Support Bits of Functions in Function Group 1
Each bit corresponds to a function. Function 15 and 0 are always enabled.
16
If a bit 400+i is set, function i is supported (i = Function 15 to 0)
399:396 Function Selection of Function Group 6
mode 0 - The function which can be switched in function group 6.
4
mode 1 - The function which is result of the switch command, in function group 6.
0xF shows function set error with the argument.
395:392 Function Selection of Function Group 5
mode 0 - The function which can be switched in function group 5.
4
mode 1 - The function which is result of the switch command, in function group 5.
0xF shows function set error with the argument.
391:388 Function Selection of Function Group 4
mode 0 - The function which can be switched in function group 4.
4
mode 1 - The function which is result of the switch command, in function group 4.
0xF shows function set error with the argument.
387:384 Function Selection of Function Group 3
mode 0 - The function which can be switched in function group 3.
4
mode 1 - The function which is result of the switch command, in function group 3.
0xF shows function set error with the argument.
383:380 Function Selection of Function Group 2
mode 0 - The function which can be switched in function group 2.
4
mode 1 - The function which is result of the switch command, in function group 2.
0xF shows function set error with the argument.
379:376 Function Selection of Function Group 1
mode 0 - The function which can be switched in function group 1.
4
mode 1 - The function which is result of the switch command, in function group 1.
0xF shows function set error with the argument.
375:368 Data Structure Version
00h – bits 511:376 are defined
8
01h – bits 511:272 are defined
02h-FFh – reserved
367:352 Reserved for Busy Status of functions in group 6
16
If bit [i] is set, function [i] is busy. This field can be read in mode 0 and mode 1
351:336 Reserved for Busy Status of functions in group 5
16
If bit [i] is set, function [i] is busy. This field can be read in mode 0 and mode 1

85

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
Bits
Description
335:320 Reserved for Busy Status of functions in group 4
If bit [i] is set, function [i] is busy. This field can be read in mode 0 and mode 1
319:304 Reserved for Busy Status of functions in group 3
If bit [i] is set, function [i] is busy. This field can be read in mode 0 and mode 1
303:288 Busy Status of functions in group 2
If bit [i] is set, function [i] is busy. This field can be read in mode 0 and mode 1
287:272 Reserved for Busy Status of functions in group 1
If bit [i] is set, function [i] is busy. This field can be read in mode 0 and mode 1
271:0 Reserved (All '0')

Width
16
16
16
16
272

Table 4-13 : Status Data Structure
4.3.10.4.1 Busy Status Indication for Functions
Each bit [367-272] shows the busy status of corresponding functions; 0 indicates ready and 1 indicates
busy. While the status is busy, the host should not change the corresponding function. Switch command
mode 1 can be applied only to ready functions.
If the function failed to be switched in mode 1 operation and returns the current function number in the
response, the function is considered busy. The mode 1 operation may affect the behavior of a function.
The mode 0 operations should be used to check the busy status of a function because it does not affect
its behavior, especially, for function group 2 as defined below.

303 302 301 300
0
VS 0
0
Note: 0: Ready 1: Busy

299
0

298
0

Function Group 2
297 296 295 294
0
0
0
0

293
0

292
291
ASSD 0

290
0

289
eC

288
0

Figure 4-15 : Busy Status of 'Command System'
4.3.10.4.2 Data Structure Version
Data Structure Version indicates effective bit fields of the Switch Function Status. The cards can set either
00h or 01h. When this field is set to 01, busy status indication is effective.
Data Structure Version
Fields of Status Data Structure
00h
511:376 are defined
01h
511:272 are defined
02h-FFh
Reserved
Table 4-14 : Data Structure Version
4.3.10.4.3 Function Table of Switch Command
Table 4-15, Table 4-16 and Table 4-17 shows possible combinations of the function switch.
"Argument" indicates 4-bit code specified in the argument of switch command (bits 23-0). "Busy Status"
indicates the function is busy as defined below.
"Status Code" indicates 4-bit code in the Status Data Structure, bits 399-376.

86

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
Argument
0

Busy Status Status Code
Don't Care

0

Ready

=Arg.

Busy

Current
Selected

Don't Care

Fh

Supported function

Not Supported function
Fh

Current
Status indicates current selected function
Selected
Table 4-15 : Status Code of Mode 0 to Supported Function Group
Don't Care

Argument
0

Busy Status Status Code
Don't Care

0

Ready

=Arg.

Busy

Current
Selected

Don't Care

Fh

Supported function

Not Supported
function
Fh

Comment
Status indicates a default function, which is
always supported.
Status indicates that the function specified in
the argument is supported and can be
switched.
Status indicates that the function specified in
the argument is supported but cannot be
switched because the function is busy.
Status indicates that the function specified in
the argument is not supported.

Comment
Default function can always be switched.
Status indicates the same function number as
specified in the argument, which means
successful function change.
Switch function is canceled and status indicates
current selected function.
If one of the function groups indicates an error
code (Fh), switch requests to all switch functions
are canceled and the rest of the data in the Status
Data Structure should be ignored.

Current
Status indicates current selected function
Selected
Table 4-16 : Status Code of Mode 1 to Supported Function Group

Argument
0
Eh-1h
Fh

Don't Care

Busy Status Status Code
Don't Care
Don't Care
Don't Care

0
Fh
0

Comment
Status always indicates 0.
Status always indicates Fh.
Status always indicates 0.

Table 4-17 : Status Code of Mode 0 and 1 to Unsupported Function Group

87

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.10.5 Relationship between CMD6 Data and Other Commands
This section is a blank in the Simplified Specification.
Figure 4-16 : CMD12 during CMD6; Case 1 (Removed in the Simplified Specification)
Figure 4-17 : CMD12 during CMD6; Case 2 (Removed in the Simplified Specification)
4.3.10.6 Switch Function Flow Example
This section is a blank in the Simplified Specification.
Figure 4-18 : Example of Switch Function flow (Removed in the Simplified Specification)
Figure 4-19 : Switching Function Flow (Removed in the Simplified Specification)
4.3.10.7 Example of Checking
This section is a blank in the Simplified Specification.

4.3.10.8 Example of Switching
This section is a blank in the Simplified Specification.

88

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.11 High-Speed Mode (25 MB/sec interface speed)
Although the Rev 1.01 SD memory card supports up to 12.5 MB/sec interface speed, the speed of 25
MB/sec is necessary to support increasing performance needs of the host and because memory size
continues to grow.
To achieve the 25 MB/sec interface speed, the clock rate is increased to 50 MHz and CLK/CMD/DAT
signal timing and circuit conditions are reconsidered and changed from the Physical Layer Specification
Version 1.01.
After power up, the SD memory card is in the default speed mode, and by using Switch Function
command (CMD6), the Version 1.10 and higher SD memory card can be placed in High-Speed mode.
The High-Speed function is a function in the access mode group (see Table 4-11). Supporting High-Speed
mode is optional.
Because it is not possible to control two cards or more in the case that each of them has a different timing
mode (Default and High-Speed mode) and in order to satisfy severe timing, the host shall drive only one
card. CLK/CMD/DAT signal shall be connected in 1-to-1 between the host and the card.

4.3.12 Command System
SD commands CMD34-37, CMD50, and CMD57 are reserved for SD command system expansion via
the switch command. Switching between the various functions of the command system function group,
will change the interpretation and associated bus transaction (i.e. command without data transfer, single
block read, multiple block write, etc.) of these commands. Supporting Command system is optional
 When the "standard command set" (default function 0x0) is selected, these commands will not be
recognized by the card and will be considered as illegal commands (as defined in the Physical Layer
Specification Version 1.01)
 When the "vendor specific" (function 0xE) is selected, the behaviors of these commands are vendor
specific. They are not defined by this standard and may change for different card vendors.
 When the "mobile e-commerce" (function 0x1) is selected, the behavior of these commands is
governed by the SD Specifications Part A1: Mobile Commerce Extension Specification.
When either of these extensions is used, special care should be given to proper selection of the command
set function; otherwise, the host command may be interpreted incorrectly.
All other commands of the SD memory card (not reserved for the switch commands) are always available
and will be executed as defined in this document regardless of the currently selected commands set.

89

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.3.13 Send Interface Condition Command (CMD8)
CMD8 (Send Interface Condition Command) is defined to initialize SD Memory Cards compliant to the
Physical Layer Specification Version 2.00 or later. CMD8 is valid when the card is in Idle state. This
command has two functions.
 Voltage check:
Checks whether the card can operate on the host supply voltage.
 Enabling expansion of existing command and response:
Reviving CMD8 enables to expand new functionality to some existing commands by redefining
previously reserved bits. ACMD41 was expanded to support initialization of SDHC Card and the
expansion is also applied to SDXC and SDUC Card.
Table 4-18 shows the format of CMD8. As described in Low Voltage Interface Addendum, VHS=0010b is
set to the CMD8 after LVS Identification, including CA-mode Fast Boot.
Bit position

47

46

[45:40]

[39:22]

21

20

[19:16]

[15:8]

[7:1]

0

Width (bits)

1

1

6

18

1

1

4

8

7

1

Value

'0'

'1'

'001000'

'00000h'

x

x

x

x

'1'

Check
pattern

CRC7

End
bit

Description

Start
bit

Transmission Command Reserved
bit
index
bits

x
PCIe 1.2V
Support 1)

PCIe
Voltage
Avail- supplied
ability 2) (VHS)

1) Host asks whether card supports VDD3 (1.2V power rail)
0b: Not asking 1.2V support
1b: Asking 1.2V support (VDD3 is supported by host.
VDD3 shall be used if card supports it, too.)
2) Host asks card’s PCIe availability
0b: Not asking PCIe availability
1b: Asking PCIe availability (PCIe interface is supported by host.
PCIe interface shall be used if card supports it, too.)

Voltage Supplied
Value Definition
0000b
Not Defined
0001b
2.7-3.6V
0010b
Reserved for Low Voltage Range
0100b
Reserved
1000b
Reserved
Others
Not Defined
Table 4-18 : Format of CMD8
When the card is in Idle state, the host shall issue CMD8 before ACMD41. In the argument, 'voltage
supplied' is set to the host supply voltage and 'check pattern' is set to any 8-bit pattern.
The card checks whether it can operate on the host's supply voltage. The card that accepted the supplied
voltage returns R7 response. In the response, the card echoes back both the voltage range and check
pattern set in the argument. If the card does not support the host supply voltage, it shall not return
response and stays in Idle state. Table 4-19 shows the card operation for CMD8.
Table 4.3.13-1 shows the SD Express card responses for SD Express specific arguments.
Refer to Low Voltage Interface Addendum for VHS Value Definition during LV initialization.
A part of this section is not described in the simplified version.

90

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

Table 4-19 : Card Operation for CMD8 in SD Mode (Removed in the Simplified Specification)
Table 4.3.13-1 : Card Operation for CMD8 for SD Express specific Parameters (Removed in the
Simplified Specification)

4.3.14 Command Functional Difference in Card Capacity Types
CCS in the response of ACMD41 determines card capacity types: CCS=0 is SDSC and CCS=1 is SDHC
or SDXC.
Memory access commands include block read commands (CMD17, CMD18), block write commands
(CMD24, CMD25), and block erase commands (CMD32, CMD33).
Following are the functional differences of memory access commands between SDSC and SDHC, SDXC,
SDUC:
 Command Argument
SDHC and SDXC use the 32-bit argument of memory access commands as block address format.
Block length is fixed to 512 bytes regardless CMD16,
SDSC uses the 32-bit argument of memory access commands as byte address format. Block length
is determined by CMD16,
i.e.:
(a) Argument 0001h is byte address 0001h in the SDSC and 0001h block in SDHC and SDXC
(b) Argument 0200h is byte address 0200h in the SDSC and 0200h block in SDHC and SDXC
Refer to Section 4.20.2 for SDUC.
 Partial Access and Misalign Access
SDHC, SDXC and SDUC disable Partial access and Misalign access (crossing physical block
boundary) as the block address is used. Access is only granted based on block addressing.
 Set Block Length
SDHC, SDXC and SDUC use 512-byte fixed block length for memory access commands regardless
of the block length set by CMD16. The setting of the block length does not affect the memory access
commands. CMD42 is not classified as a memory access command. The data block size shall be
specified by CMD16 and the block length can be set up to 512 bytes. Setting block length larger than
512 bytes sets the BLOCK_LEN_ERROR error bit regardless of the card capacity.
 Write Protected Group
SDHC, SDXC and SDUC do not support write-protected groups. Issuing CMD28, CMD29 and
CMD30 generates the ILLEGAL_COMMAND error.

91

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.4 Clock Control
The SD Memory Card bus clock signal can be used by the host to change the cards to energy saving
mode or to control the data flow (to avoid under-run or over-run conditions) on the bus. The host is allowed
to lower the clock frequency or shut it down. For example, in the case that a host with 512 Bytes of data
buffer would like to transfer data to a card with 1 KByte write blocks. So, to preserve a continuous data
transfer, from the card's point of view, the clock to the card shall be stopped after the first 512 Bytes. Then
the host will fill its internal buffer with another 512 Bytes. After the second half of the write block is ready
in the host, it will continue the data transfer to the card by re-starting the clock supply. In such a way, the
card does not recognize any interruptions in the data transfer.
There are a few restrictions the host shall consider:
 The bus frequency can be changed at any time (under the restrictions of maximum data transfer
frequency and the identification frequency defined by the specification document).
 An exemption to the above is ACMD41 (SD_APP_OP_COND). After issuing the command ACMD41,
the following 1) or 2) procedures shall be done by the host until the card becomes ready.
1) Issue continuous clock in the frequency range of 100 KHz-400 KHz.
If the host wants to stop the clock, poll busy bit by ACMD41 command at less than 50 ms intervals.
100KHz-400KHz clocks

CLK
1)
CMD

2nd

1st

3rd

(ACMD 41 )

Polling less than 50ms interval
CLK

< 50ms

2)
CMD

1st

< 50ms
2nd

3rd

(ACMD 41 )

 It is an obvious requirement that the clock shall be running for the card to output data or response
tokens. After the last SD Memory Card bus transaction, the host is required, to provide 8 (eight) clock
cycles for the card to complete the operation before shutting down the clock. Following is a list of the
various bus transactions:
•A command with no response. 8 clocks after the host command end bit.
•A command with response. 8 clocks after the card response end bit.
•A read data transaction. 8 clocks after the end bit of the last data block.
•A write data transaction. 8 clocks after the CRC status token.
 The host is allowed to shut down the clock of a "busy" card. The card will complete the programming
operation regardless of the host clock. However, the host shall provide a clock edge for the card to
turn off its busy signal. Without a clock edge, the card (unless previously disconnected by a deselect
command -CMD7) will force the DAT line down forever.

92

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.5 Cyclic Redundancy Code (CRC)
The CRC is intended to protect SD Memory Card commands, responses, and data transfer against
transmission errors on the SD Memory Card bus. One CRC is generated for every command and checked
for every response on the CMD line. For data blocks, one CRC per transferred block is generated. The
CRC is generated and checked as described in the following.

•

CRC7
The CRC7 check is used for all commands, for all responses except type R3, and for the CSD and CID
registers. The CRC7 is a 7-bit value and is computed as follows:
Generator polynomial: G(x) = x7 + x3 + 1.
M(x) = (first bit) * xn + (second bit) * xn-1 +...+ (last bit) * x0
CRC[6...0] = Remainder [(M(x) * x7)/G(x)]
The first bit is the most left bit of the corresponding bit string (of the command, response, CID or CSD).
The degree n of the polynomial is the number of CRC protected bits decreased by one. The number of
bits to be protected is 40 for commands and responses (n = 39), and 120 for the CSD and CID (n = 119).

data out
data in

Figure 4-20 : CRC7 Generator/Checker

•

CRC7 Examples
The CRC section of the command/response is bolded.
CMD0 (Argument=0) --> 01 000000 00000000000000000000000000000000 "1001010" 1
CMD17 (Argument=0) --> 01 010001 00000000000000000000000000000000 "0101010" 1
Response of CMD17 --> 00 010001 00000000000000000000100100000000 "0110011" 1

93

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

•

CRC16
In the case of one DAT line usage, the CRC16 is used for payload protection in block transfer mode. The
CRC check sum is a 16-bit value and is computed as follows:
Generator polynomial G(x) = x16 +x12 +x5 +1
M(x) = (first bit) * xn + (second bit)* xn-1 +...+ (last bit) * x0
CRC[15...0] = Remainder [(M(x) * x16)/G(x)]
The first bit is the first data bit of the corresponding block. The degree n of the polynomial denotes the
number of bits of the data block decreased by one (e.g. n = 4095 for a block length of 512 bytes). The
generator polynomial G(x) is a standard CCITT polynomial. The code has a minimal distance d=4 and is
used for a payload length of up to 2048 Bytes (n <= 16383).
The same CRC16 method shall be used in single DAT line mode and in wide bus mode.
In wide bus mode, the CRC16 is done on each line separately.

data out

data in

Figure 4-21 : CRC16 Generator/Checker

•

CRC16 Example
512 bytes with 0xFF data --> CRC16 = 0x7FA1

94

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.6 Error Conditions
4.6.1 CRC and Illegal Command
All commands are protected by CRC (cyclic redundancy check) bits. If the addressed card's CRC check
fails, the card does not respond and the command is not executed. The card does not change its state,
and COM_CRC_ERROR bit is set in the status register.
Similarly, if an illegal command has been received, a card shall not change its state, shall not response
and shall set the ILLEGAL_COMMAND error bit in the status register. Only the non-erroneous state
branches are shown in the state diagrams (see Figure 4-1 and Figure 4-13).
Table 4-35 contains a complete state transition description.
There are different kinds of illegal commands:
 Commands that belong to classes not supported by the card (e.g. write commands in read only
cards).
 Commands not allowed in the current state (e.g. CMD2 in Transfer State).
 Commands that are not defined (e.g. CMD5).

4.6.2 Read, Write and Erase Timeout Conditions
A card shall complete the command within the time period defined as follows or give up and return an
error message. If the host does not get any response with the given timeout it should assume that the
card is not going to respond and try to recover (e.g. reset the card, power cycle, reject, etc.).

4.6.2.1 Read
For a Standard Capacity SD Memory Card, the times after which a timeout condition for read operations
occurs are (card independent) either 100 times longer than the typical access times for these operations
given below or 100 ms (the lower of the two). The read access time is defined as the sum of the two
times given by the CSD parameters TAAC and NSAC (see Section 5.3). In the case of a single read
operation, these card parameters define the typical delay between the end bit of the read command and
the start bit of the data block. In the case of a multiple-read operation, they also define the typical delay
between the end bit of a data block and the start bit of next data block.
A High Capacity SD Memory Card and Extended Capacity SD Memory Card indicate TAAC and NSAC
as fixed values. The host should use 100 ms timeout (minimum) for single and multiple read operations
rather than using TAAC and NSAC.
4.6.2.2 Write
For a Standard Capacity SD Memory Card, the times after which a timeout condition for write operations
occurs are (card independent) either 100 times longer than the typical program times for these
operations given below or 250 ms (the lower of the two). The R2W_FACTOR field in the CSD is used
to calculate the typical block program time obtained by multiplying the read access time by this factor. It
applies to all write commands (e.g. SET(CLR)_WRITE_PROTECT, PROGRAM_CSD and the block write
commands). High Capacity SD Memory Card, Extended Capacity SD Memory Card and SDUC Memory
Card indicate R2W_FACTOR as a fixed value.
In case of High Capacity SD Memory Card, maximum length of busy is defined as 250ms for all write
operation.
While the card should try to maintain that busy indication of write operation does not exceed 250ms in
the case of SDXC and SDUC card, if the card is not possible to maintain operations with 250ms busy, the
card can indicate write busy up to 500ms including single and multiple block write in the following
scenarios:
a) The last busy in any write operation up to 500ms including single and multiple block write.
b) When multiple block write is stopped by CMD12, the busy from the response of CMD12 is up to
500ms.
95

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10
c) When multiple block write is stopped by CMD23, the busy after the last data block is up to 500ms.
d) Busy indication at block gap in multiple block write is up to 250ms except a following case. When
the card executes consecutive two blocks write (2*512Bytes) and it spans across the physical block
boundary, the busy after the each block can be indicated up to 500ms.
Especially regardless of the above definition, a speed class writing mode specified by CMD20 shall keep
write busy up to 250ms in any case until the end of speed class write is indicated.
There are two types of busies in a multiple block write operation.
(1) Write busy at block gap (without CMD12) is maximum 250ms
(2) Write busy after CMD12 is maximum 250ms (500ms for SDXC and SDUC)
If CMD12 is issued during a multiple block write operation's busy period, the host timeout counter is reset
and the 250ms (500ms for SDXC and SDUC) timeout period is measured from the response of CMD12.
In UHS-II mode, data is transferred by the unit of Data Burst. Data Burst consists of one or multiple data
blocks and is determined depends on capability of host and card. Busy is not indicated after every block
but indicated after every Data Burst. The maximum busy length after Data Burst is defined as 1 second.
Refer to UHS-II Addendum about Data Burst for more details.
Application Notes:
The host should use a fixed timeout for write operations rather than using a timeout calculated from
the R2W_FACTOR parameter.
It is strongly recommended for hosts to implement more than 500ms timeout value even if the card
indicates the 250ms maximum busy length.
Even if the card supports Speed Class, any multiple block write operation may indicate a busy period
of up to a maximum of 250ms. The sum of the busy periods over an AU is limited by Speed Class.
In UHS-II mode, refer to UHS-II Addendum about host timeout setting.

4.6.2.3 Erase
If the card supports parameters for erase timeout calculation in the SD Status, the host should use them
to determine erase timeout (see Section 4.10.2). If the card does not support these parameters, erase
timeout can be estimated by block write delay.
The duration of an erase command can be estimated by the number of write blocks (WRITE_BL) to be
erased multiplied by 250 ms.

96

©Copyright 2001-2023 KIOXIA, Panasonic Connect, SanDisk and SD Card Association
Physical Layer Simplified Specification Version 9.10

4.7 Commands
SD Commands applicable to UHS-II are defined in the UHS-II Addendum.

4.7.1 Command Types
There are four kinds of commands defined to control the SD Memory Card:
 Broadcast commands (bc), no response - The broadcast feature is only if all the CMD lines are
connected together in the host. If they are separated, then each card will accept it separately in its
